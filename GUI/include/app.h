/*
Application class delcaration for a gameboy color emulator. This class acts
as the parent WxWidget application.
*/
#ifndef APP_H
#define APP_H

#include <wx/wxprec.h>
#include "wx/thread.h"
#include "wx/dynarray.h"
#include "wx/numdlg.h"
#include "wx/progdlg.h"
#include <string>

// Forward declarations.

class EmulationThread;
class MainWindowFrame;
class Core;

// The parent WxWidget application.
class App : public wxApp
{
public:
	virtual bool OnInit();
	virtual int OnExit();

	//void SendUpdateDisplayEvent();
	//void OnUpdateDisplayEvent(wxCommandEvent &event);

	/**
	 * @brief Gets the current running state of the emulation core.	
	 * 
	 * @return Returns a boolean indicating whether or not the emulator
	 * is currently running.
	 */
	bool getRunningEmulationState() { return runningEmulator; }
	/**
	 * @brief Sets the current running state of the emulation core.
	 * 
	 * @param state The running state to set the emulation core to.
	 */
	void setRunningEmulationState(bool state) { runningEmulator = state; }

	/**
	 * @brief Initialize the SDL2 subsystem.
	 * 
	 * Will output error messages to std::cerr upon failure.
	 * 
	 * @return Returns the success of SDL's initialization.
	 */
	bool initializeSDL2();

	/**
	 * @brief Sends an 'EMULATOR_CORE_UPDATE_EVENT' to the rest of the application. This 
	 * event should be generated by the emulator core when it wishes the rest of the GUI
	 * to update.
	 */
	void sendEmulationCoreUpdateEvent();

private:
	// A boolean indicating whether the emulator is currently running.
	bool runningEmulator = false;

	EmulationThread *emuThread = nullptr;
	MainWindowFrame *mainWindow = nullptr;

	Core *emuCore = nullptr;
};

#endif